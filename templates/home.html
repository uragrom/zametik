<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–∞–≤–Ω–∞—è - –ó–∞–º–µ—Ç–∫–∏</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="home-body" style="overflow-y: auto !important;">
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="login-screen" class="login-screen">
        <div class="login-container glass-card">
            <h1 class="login-title">–ü—Ä–∏–≤–µ—Ç! üëã</h1>
            <div id="init-form" class="login-form" style="display: none;">
                <p class="login-subtitle">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞</p>
                <input type="password" id="init-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off" class="glass-input">
                <input type="password" id="init-password-confirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off" class="glass-input">
                <button id="init-btn" class="btn-glow">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div id="login-form" class="login-form">
                <p class="login-subtitle">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</p>
                <input type="password" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off" class="glass-input">
                <button id="login-btn" class="btn-glow">–í–æ–π—Ç–∏</button>
            </div>
            <div id="login-error" class="error-message"></div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div id="home-app" class="home-app" style="display: none;">
        <!-- –ö—Ä–∞—Å–∏–≤—ã–π header -->
        <header class="home-header-gradient">
            <div class="home-header-content">
                <div class="home-header-left">
                    <button id="home-back-btn" class="btn-glass" title="–ó–∞–º–µ—Ç–∫–∏">
                        <span>‚Üê –ó–∞–º–µ—Ç–∫–∏</span>
                    </button>
                </div>
                <div class="home-header-center">
                    <h1 class="home-greeting" id="home-greeting-text">–î–æ–±—Ä—ã–π –¥–µ–Ω—å!</h1>
                    <p class="home-subtext" id="home-notes-count">0 –∑–∞–º–µ—Ç–æ–∫</p>
                </div>
                <div class="home-header-right">
                    <button id="home-logout-btn" class="btn-glass" title="–í—ã—Ö–æ–¥">
                        üö™ –í—ã—Ö–æ–¥
                    </button>
                </div>
            </div>
            <!-- –ü–æ–∏—Å–∫ -->
            <div class="home-search-wrapper">
                <input type="text" id="home-search-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∑–∞–º–µ—Ç–∫–∞–º..." autocomplete="off" class="home-search-input-glass">
                <div id="home-search-results" class="home-search-results glass-card"></div>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç - –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º—ã–π -->
        <main class="home-main-scroll">
            <!-- –í–µ—Ä—Ö–Ω—è—è —Å–µ–∫—Ü–∏—è: –∏–Ω—Ñ–æ-–∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –≥—Ä–∞—Ñ -->
            <div class="home-top-section">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∏–Ω—Ñ–æ -->
                <aside class="home-info-col">
                    <div class="sidebar-card glass-card">
                        <h3 class="sidebar-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="stat-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="stats-notes-count">0</span>
                                <span class="stat-label">–∑–∞–º–µ—Ç–æ–∫</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="stats-tags-count">0</span>
                                <span class="stat-label">—Ç–µ–≥–æ–≤</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-card glass-card">
                        <h3 class="sidebar-title">üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ</h3>
                        <div class="recent-list" id="home-recent-notes">
                            <div class="empty-state">–ù–µ—Ç –∑–∞–º–µ—Ç–æ–∫</div>
                        </div>
                    </div>
                    
                    <div class="sidebar-card glass-card">
                        <h3 class="sidebar-title">üïê –ò—Å—Ç–æ—Ä–∏—è</h3>
                        <div class="history-list" id="home-access-history">
                            <div class="empty-state">–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏</div>
                        </div>
                    </div>
                </aside>

                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ì—Ä–∞—Ñ -->
                <section class="home-graph-col">
                    <div class="graph-card glass-card">
                        <div class="graph-header">
                            <h2 class="graph-title">üï∏Ô∏è –ì—Ä–∞—Ñ –∑–∞–º–µ—Ç–æ–∫</h2>
                            <div class="graph-controls">
                                <button id="graph-filter-all" class="graph-btn active" data-filter="all">–í—Å–µ</button>
                                <button id="graph-filter-linked" class="graph-btn" data-filter="linked">–°–≤—è–∑–∞–Ω–Ω—ã–µ</button>
                                <button id="graph-expand-btn" class="graph-btn-icon" title="–ù–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω">‚õ∂</button>
                            </div>
                        </div>
                        <div class="graph-canvas-wrapper">
                            <canvas id="graph-canvas"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <!-- –ù–∏–∂–Ω—è—è —Å–µ–∫—Ü–∏—è: –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
            <section class="home-calendar-section">
                <div class="calendar-card-full glass-card">
                    <h3 class="sidebar-title">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</h3>
                    <div id="calendar-container"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Popup –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ JS -->

    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toast-container" class="toast-container"></div>

    <script src="{{ url_for('static', filename='js/graph-view.js') }}"></script>
    <script src="{{ url_for('static', filename='js/search-highlight.js') }}"></script>
    <script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>
</html>
