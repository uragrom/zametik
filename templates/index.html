<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–≤–µ—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <h1>–ü—Ä–∏–≤–µ—Ç! –ù–∞–¥–µ—é—Å—å —Ç—ã –Æ—Ä–∞.</h1>
            <div id="init-form" class="login-form" style="display: none;">
                <p class="login-subtitle">–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞</p>
                <input type="password" id="init-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off">
                <input type="password" id="init-password-confirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off">
                <button id="init-btn" class="btn-primary">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div id="login-form" class="login-form">
                <p class="login-subtitle">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</p>
                <input type="password" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off">
                <button id="login-btn" class="btn-primary">–í–æ–π—Ç–∏</button>
            </div>
            <div id="login-error" class="error-message"></div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="app-container" style="display: none;">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>üìù –ó–∞–º–µ—Ç–∫–∏</h2>
                <div style="display: flex; gap: 0.5rem;">
                    <button id="home-btn" class="btn-icon" title="–ì–ª–∞–≤–Ω–∞—è (–ì—Ä–∞—Ñ)">üï∏Ô∏è</button>
                    <button id="random-note-btn" class="btn-icon" title="–°–ª—É—á–∞–π–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞">üé≤</button>
                    <button id="new-note-btn" class="btn-icon" title="–°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–∫—É">‚ûï</button>
                </div>
            </div>
            
            <div class="stats-panel" id="stats-panel">
                <div class="stat-item">
                    <span class="stat-value" id="notes-count">0</span>
                    <span class="stat-label">–ó–∞–º–µ—Ç–æ–∫</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="words-count">0</span>
                    <span class="stat-label" id="words-count-label">–°–ª–æ–≤</span>
                </div>
            </div>
            
            <div class="search-container">
                <input type="text" id="search-input" placeholder="üîç –ü–æ–∏—Å–∫..." autocomplete="off">
            </div>
            
            <div class="tags-container" id="tags-container" style="display: none;">
                <div class="tags-header">
                    <span>üè∑Ô∏è –¢–µ–≥–∏:</span>
                    <button id="clear-tags-filter" class="btn-small">‚úï</button>
                </div>
                <div id="tags-list" class="tags-list"></div>
            </div>
            
            <div class="notes-list" id="notes-list">
                <!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å -->
        <main class="main-content">
            <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
            <div class="toolbar">
                <div class="toolbar-left">
                    <button id="bold-btn" class="toolbar-btn" title="–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç">B</button>
                    <button id="italic-btn" class="toolbar-btn" title="–ö—É—Ä—Å–∏–≤">I</button>
                    <button id="code-btn" class="toolbar-btn" title="–ö–æ–¥">&lt;/&gt;</button>
                    <button id="quote-btn" class="toolbar-btn" title="–¶–∏—Ç–∞—Ç–∞">"</button>
                    <div class="toolbar-separator"></div>
                    <button id="h1-btn" class="toolbar-btn" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1">H1</button>
                    <button id="h2-btn" class="toolbar-btn" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2">H2</button>
                    <button id="h3-btn" class="toolbar-btn" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 3">H3</button>
                    <div class="toolbar-separator"></div>
                    <button id="insert-phrase-btn" class="toolbar-btn" title="–í—Å—Ç–∞–≤–∏—Ç—å —Ñ—Ä–∞–∑—É –∏–∑ —Å–ª–æ–≤–∞—Ä—è">üìö</button>
                    <div class="toolbar-separator"></div>
                    <button id="note-links-btn" class="toolbar-btn" title="–°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏">üîó</button>
                </div>
                <div class="toolbar-right">
                    <button id="save-now-btn" class="toolbar-btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å"><span class="toolbar-icon">üíæ</span><span class="toolbar-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span></button>
                    <button id="duplicate-note-btn" class="toolbar-btn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫—É"><span class="toolbar-icon">üìã</span><span class="toolbar-text">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span></button>
                    <button id="export-btn" class="toolbar-btn" title="–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–º–µ—Ç–∫–∏"><span class="toolbar-icon">üì§</span><span class="toolbar-text">–≠–∫—Å–ø–æ—Ä—Ç</span></button>
                    <div class="toolbar-separator"></div>
                    <button id="search-focus-btn" class="toolbar-btn" title="–ü–æ–∏—Å–∫"><span class="toolbar-icon">üîç</span><span class="toolbar-text">–ü–æ–∏—Å–∫</span></button>
                    <button id="dictionary-btn" class="btn-secondary" title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–º"><span class="toolbar-icon">üìñ</span><span class="toolbar-text">–°–ª–æ–≤–∞—Ä—å</span></button>
                    <span id="save-status" class="save-status">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ</span>
                    <button id="settings-btn" class="btn-secondary toolbar-btn-icon" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                    <button id="logout-btn" class="btn-secondary" title="–í—ã—Ö–æ–¥"><span class="toolbar-icon">üö™</span><span class="toolbar-text">–í—ã—Ö–æ–¥</span></button>
                </div>
            </div>

            <!-- –†–µ–¥–∞–∫—Ç–æ—Ä -->
            <div class="editor-container">
                <div class="editor-wrapper">
                    <div class="note-header">
                        <input type="text" id="note-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏..." class="note-title-input">
                        <div class="note-header-meta">
                            <div class="note-tags-input-container">
                                <input type="text" id="note-tags-input" placeholder="üè∑Ô∏è –¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)..." class="note-tags-input" autocomplete="off">
                                <div id="note-tags-display" class="note-tags-display"></div>
                            </div>
                            <div class="note-date-link-container">
                                <button id="note-date-link-btn" class="note-date-link-btn" title="–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ –¥–∞—Ç–µ">üìÖ</button>
                                <span id="note-linked-date" class="note-linked-date" style="display: none;"></span>
                                <button id="note-date-unlink-btn" class="note-date-unlink-btn" title="–û—Ç–≤—è–∑–∞—Ç—å –æ—Ç –¥–∞—Ç—ã" style="display: none;">‚úï</button>
                                <div id="note-date-picker-container" class="note-date-picker-container" style="display: none;">
                                    <input type="date" id="note-date-picker" class="note-date-picker">
                                    <button id="note-date-confirm-btn" class="note-date-confirm-btn" title="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å">‚úì</button>
                                    <button id="note-date-cancel-btn" class="note-date-cancel-btn" title="–û—Ç–º–µ–Ω–∞">‚úï</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="note-links-panel" id="note-links-panel" style="display: none;">
                        <div id="note-links-display" class="note-links-display"></div>
                        <div id="note-links-selector" class="note-links-selector" style="display: none;">
                            <input type="text" id="note-links-search" placeholder="üîç –ü–æ–∏—Å–∫ –∑–∞–º–µ—Ç–æ–∫..." class="note-links-search" autocomplete="off">
                            <div id="note-links-list" class="note-links-list"></div>
                        </div>
                    </div>
                    <div class="editor-tabs" id="editor-tabs">
                        <button class="tab-btn active" data-tab="edit">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button class="tab-btn" data-tab="preview">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <!-- Text editor -->
                    <div id="text-editor-container">
                        <textarea id="note-editor" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –∑–∞–º–µ—Ç–∫—É...&#10;&#10;–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown:&#10;- **–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**&#10;- *–∫—É—Ä—Å–∏–≤*&#10;- `–∫–æ–¥`&#10;- > —Ü–∏—Ç–∞—Ç—ã&#10;- # –∑–∞–≥–æ–ª–æ–≤–∫–∏"></textarea>
                        <div id="note-preview" class="note-preview"></div>
                    </div>
                    <!-- Canvas editor -->
                    <div id="canvas-editor-container" style="display: none; flex: 1; position: relative; overflow: hidden; background: #1e1e1e;">
                        <div id="canvas-toolbar" style="position: absolute; top: 0; left: 0; right: 0; background: var(--bg-secondary); border-bottom: 1px solid var(--border); padding: 0.35rem 0.5rem; z-index: 10; display: flex; gap: 0.25rem; flex-wrap: nowrap; overflow-x: auto; align-items: center;">
                            <button class="canvas-tool-btn active" data-tool="select" title="–í—ã–±–æ—Ä">üëÜ</button>
                            <button class="canvas-tool-btn" data-tool="pan" title="–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞">‚úã</button>
                            <button class="canvas-tool-btn" data-tool="pencil" title="–ö–∞—Ä–∞–Ω–¥–∞—à">‚úèÔ∏è</button>
                            <button class="canvas-tool-btn" data-tool="node" title="–°–æ–∑–¥–∞—Ç—å –±–ª–æ–∫">‚¨ú</button>
                            <button class="canvas-tool-btn" data-tool="zone" title="–ó–æ–Ω–∞ (–∑–∞–¥–Ω–∏–π –ø–ª–∞–Ω)">üî≤</button>
                            <button class="canvas-tool-btn" data-tool="sticker" title="–°—Ç–∏–∫–µ—Ä">üìå</button>
                            <button class="canvas-tool-btn" data-tool="frame" title="–†–∞–º–∫–∞">üñºÔ∏è</button>
                            <button class="canvas-tool-btn" data-tool="line" title="–õ–∏–Ω–∏—è">‚îÄ</button>
                            <button class="canvas-tool-btn" data-tool="arrow" title="–°—Ç—Ä–µ–ª–∫–∞">‚Üí</button>
                            <button class="canvas-tool-btn" data-tool="curved-arrow" title="–ò–∑–æ–≥–Ω—É—Ç–∞—è —Å—Ç—Ä–µ–ª–∫–∞">‚Ü™</button>
                            <button class="canvas-tool-btn" data-tool="text" title="–¢–µ–∫—Å—Ç">üìù</button>
                            <div style="width: 1px; height: 20px; background: var(--border); margin: 0 0.15rem; flex-shrink: 0;"></div>
                            <!-- –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ -->
                            <div class="canvas-palette-container" style="position: relative;">
                                <button class="canvas-tool-btn" id="canvas-palette-btn" title="–ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤">üé®</button>
                                <div id="canvas-palette-dropdown" class="canvas-palette-dropdown" style="display: none;">
                                    <div id="canvas-palette-colors" class="canvas-palette-colors"></div>
                                    <div class="canvas-palette-actions">
                                        <input type="color" id="canvas-palette-add-color" value="#5865f2" title="–î–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç">
                                        <button id="canvas-palette-add-btn" class="canvas-palette-add-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –ø–∞–ª–∏—Ç—Ä—É">+</button>
                                    </div>
                                </div>
                            </div>
                            <input type="color" id="canvas-color" value="#5865f2" title="–¶–≤–µ—Ç –ª–∏–Ω–∏–∏" style="width: 28px; height: 28px; padding: 0; border: 1px solid var(--border); border-radius: 4px; cursor: pointer; flex-shrink: 0;">
                            <input type="color" id="canvas-fill-color" value="#252525" title="–¶–≤–µ—Ç –∑–∞–ª–∏–≤–∫–∏" style="width: 28px; height: 28px; padding: 0; border: 1px solid var(--border); border-radius: 4px; cursor: pointer; flex-shrink: 0;">
                            <select id="canvas-line-style" title="–°—Ç–∏–ª—å –ª–∏–Ω–∏–∏" style="padding: 0.15rem 0.25rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 0.75rem; height: 28px; flex-shrink: 0;">
                                <option value="solid">‚îÄ –°–ø–ª–æ—à–Ω–∞—è</option>
                                <option value="dashed">‚îÑ –ü—É–Ω–∫—Ç–∏—Ä</option>
                                <option value="dotted">‚îà –¢–æ—á–∫–∏</option>
                                <option value="dashdot">‚îº –®—Ç—Ä–∏—Ö-–ø—É–Ω–∫—Ç–∏—Ä</option>
                                <option value="wave">„Ä∞Ô∏è –í–æ–ª–Ω–∞</option>
                            </select>
                            <select id="canvas-arrow-style" title="–°—Ç–∏–ª—å —Å—Ç—Ä–µ–ª–∫–∏" style="padding: 0.15rem 0.25rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 0.75rem; height: 28px; flex-shrink: 0;">
                                <option value="normal">‚Üí –û–±—ã—á–Ω</option>
                                <option value="double">‚áâ –î–≤–æ–π–Ω</option>
                                <option value="open">‚áÄ –û—Ç–∫—Ä</option>
                                <option value="closed">‚ñ∂ –ó–∞–∫—Ä</option>
                                <option value="diamond">‚üê –†–æ–º–±</option>
                            </select>
                            <select id="canvas-node-shape" title="–§–æ—Ä–º–∞ –±–ª–æ–∫–∞" style="padding: 0.15rem 0.25rem; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 4px; color: var(--text-primary); font-size: 0.75rem; height: 28px; flex-shrink: 0;">
                                <option value="rectangle">‚ñ≠ –ü—Ä—è–º–æ—É–≥</option>
                                <option value="circle">‚óã –ö—Ä—É–≥</option>
                                <option value="ellipse">‚óØ –û–≤–∞–ª</option>
                                <option value="triangle">‚ñ≥ –¢—Ä–µ—É–≥</option>
                                <option value="diamond">‚óá –†–æ–º–±</option>
                                <option value="star">‚òÖ –ó–≤–µ–∑–¥–∞</option>
                                <option value="hexagon">‚¨° 6-—É–≥–æ–ª—å</option>
                            </select>
                            <input type="file" id="canvas-image-upload" accept="image/*" style="display: none;">
                            <button class="canvas-tool-btn" id="canvas-upload-btn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üñºÔ∏è</button>
                            <button class="canvas-tool-btn" id="canvas-todo-btn" title="–î–æ–±–∞–≤–∏—Ç—å TODO –∫ –±–ª–æ–∫—É" style="display: none;">‚òëÔ∏è</button>
                            <button class="canvas-tool-btn" id="canvas-delete-btn" title="–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ">üóëÔ∏è</button>
                        </div>
                        <div id="canvas-editor" style="position: absolute; top: 38px; left: 0; right: 0; bottom: 0;"></div>
                    </div>
                    <!-- Kanban editor -->
                    <div id="kanban-editor-container" style="display: none; flex: 1; position: relative; overflow: hidden; background: var(--bg-primary);"></div>
                </div>
            </div>
        </main>

        <!-- TODO –ø–∞–Ω–µ–ª–∏ -->
        <div id="todo-panels-container" class="todo-panels-container">
            <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π TODO -->
            <div id="global-todo-panel" class="todo-panel collapsed">
                <button class="todo-toggle-btn" onclick="toggleTodoPanel('global')" title="–ì–ª–æ–±–∞–ª—å–Ω—ã–π TODO">
                    <span class="todo-arrow">‚óÄ</span>
                </button>
                <div class="todo-panel-content">
                    <div class="todo-header">
                        <h3>üìã –ì–ª–æ–±–∞–ª—å–Ω—ã–π TODO</h3>
                    </div>
                    <div class="todo-list" id="global-todo-list">
                        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                    <div class="todo-form">
                        <input type="text" id="global-todo-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É..." class="todo-input" autocomplete="off">
                        <button class="todo-add-btn" onclick="addTodo('global')" title="–î–æ–±–∞–≤–∏—Ç—å">‚ûï</button>
                    </div>
                </div>
            </div>

            <!-- –õ–æ–∫–∞–ª—å–Ω—ã–π TODO –¥–ª—è –∑–∞–º–µ—Ç–∫–∏ -->
            <div id="note-todo-panel" class="todo-panel collapsed">
                <button class="todo-toggle-btn" onclick="toggleTodoPanel('note')" title="TODO –∑–∞–º–µ—Ç–∫–∏">
                    <span class="todo-arrow">‚óÄ</span>
                </button>
                <div class="todo-panel-content">
                    <div class="todo-header">
                        <h3>üìù TODO –∑–∞–º–µ—Ç–∫–∏</h3>
                    </div>
                    <div class="todo-list" id="note-todo-list">
                        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                    <div class="todo-form">
                        <input type="text" id="note-todo-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É..." class="todo-input" autocomplete="off">
                        <button class="todo-add-btn" onclick="addTodo('note')" title="–î–æ–±–∞–≤–∏—Ç—å">‚ûï</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ -->
    <div id="new-note-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É</h3>
            <input type="text" id="new-note-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏..." autocomplete="off">
            <div style="margin: 1rem 0;">
                <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary);">–¢–∏–ø –∑–∞–º–µ—Ç–∫–∏:</label>
                <select id="new-note-type" style="width: 100%; padding: 0.5rem; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 6px; color: var(--text-primary);">
                    <option value="text">üìù –¢–µ–∫—Å—Ç (Markdown)</option>
                    <option value="canvas">üé® Canvas (–†–∏—Å–æ–≤–∞–Ω–∏–µ)</option>
                    <option value="kanban">üìã Kanban (–î–æ—Å–∫–∞ –∑–∞–¥–∞—á)</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="create-note-btn" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                <button id="cancel-note-btn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä–µ–º -->
    <div id="dictionary-modal" class="modal" style="display: none;">
        <div class="modal-content modal-large">
            <h3>üìñ –°–ª–æ–≤–∞—Ä—å —Ñ—Ä–∞–∑</h3>
            <div class="dictionary-container">
                <div class="dictionary-form">
                    <input type="text" id="dict-phrase-input" placeholder="–§—Ä–∞–∑–∞..." autocomplete="off">
                    <textarea id="dict-value-input" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ..." rows="3"></textarea>
                    <div class="modal-buttons">
                        <button id="add-phrase-btn" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å/–û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button id="close-dict-btn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
                <div class="dictionary-list-container">
                    <h4>–í—Å–µ —Ñ—Ä–∞–∑—ã:</h4>
                    <div id="dictionary-list" class="dictionary-list">
                        <!-- –°–ø–∏—Å–æ–∫ —Ñ—Ä–∞–∑ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã -->
    <div id="phrase-viewer-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="phrase-viewer-title">–§—Ä–∞–∑–∞</h3>
            <div id="phrase-viewer-content" class="phrase-viewer-content"></div>
            <div class="modal-buttons">
                <button id="close-phrase-viewer-btn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
    <div id="change-password-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>üîê –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
            <input type="password" id="change-password-old" placeholder="–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" autocomplete="off">
            <input type="password" id="change-password-new" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" autocomplete="off">
            <input type="password" id="change-password-confirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" autocomplete="off">
            <div id="change-password-error" class="error-message"></div>
            <div class="modal-buttons">
                <button id="change-password-submit-btn" class="btn-primary">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                <button id="change-password-cancel-btn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                <button id="change-password-menu-btn" class="btn-secondary" style="width: 100%; justify-content: flex-start; text-align: left;">
                    üîê –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                </button>
            </div>
            <div class="modal-buttons" style="margin-top: 1.5rem;">
                <button id="close-settings-btn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏ -->
    <div id="recover-note-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>üîì –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–º–µ—Ç–∫–µ</h3>
            <p id="recover-note-message" class="login-subtitle"></p>
            <input type="password" id="recover-password-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å..." autocomplete="off">
            <div class="modal-buttons">
                <button id="recover-note-btn" class="btn-primary">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button id="cancel-recover-btn" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="toast-container" class="toast-container"></div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="{{ url_for('static', filename='js/canvas-editor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/kanban-editor.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

